<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Inbox</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
            touch-action: none;
            background-color: #171717;
            display: flex;
            flex-direction: column;
            color: white;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 60px 20px 20px;
            position: relative;
            z-index: 10;
        }

        .page-title {
            font-size: 42px;
            font-weight: 800;
            letter-spacing: -1px;
            line-height: 1;
            color: white;
        }

        .background-rectangle {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background-color: #1f1f1f;
            border-radius: 0;
            z-index: 1;
        }

        .card-container {
            position: absolute;
            top: calc(35% - 45px);
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 400px;
            display: flex;
            justify-content: center;
            perspective: 1000px;
            z-index: 10;
        }

        .card-wrapper {
            display: flex;
            width: 100%;
            gap: 10px;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
        }

        .card-wrapper.pressed {
            transition: transform 0.2s ease-out;
        }

        .main-card {
            flex: 1;
            height: 55px;
            border-radius: 19px;
            background-color: white;
            display: flex;
            align-items: center;
            padding-left: 8px;
            position: relative;
        }

        .percentage-box {
            width: 62px;
            height: 62px;
            border-radius: 19px;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .percentage-icon {
            width: 28px;
            height: 28px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-image: url('https://img.icons8.com/?size=100&id=zFiUfDTGXSeZ&format=png&color=000000');
        }

        .icon-container {
            flex-shrink: 0;
            margin-left: 4px;
        }

        .icon-square {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            background-color: #171717;
        }

        .sticker-container {
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .sticker {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .text-content {
            margin-left: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
            flex: 1;
        }

        .title {
            font-size: 16px;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 2px;
            color: #171717;
        }

        .description {
            font-size: 11px;
            opacity: 0.7;
            line-height: 1;
            color: #171717;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 480px) {
            .header {
                padding: 50px 16px 16px;
            }
            
            .page-title {
                font-size: 36px;
            }
            
            .card-container {
                width: 85%;
                top: calc(35% - 45px);
            }

            .icon-square {
                width: 42px;
                height: 42px;
            }

            .sticker-container {
                width: 30px;
                height: 30px;
            }

            .percentage-box {
                width: 56px;
                height: 56px;
            }

            .percentage-icon {
                width: 26px;
                height: 26px;
            }
        }

        @media (max-width: 320px) {
            .header {
                padding: 45px 12px 12px;
            }
            
            .page-title {
                font-size: 32px;
            }
            
            .card-container {
                width: 90%;
                top: calc(35% - 45px);
            }

            .icon-square {
                width: 40px;
                height: 40px;
            }

            .sticker-container {
                width: 28px;
                height: 28px;
            }

            .percentage-box {
                width: 52px;
                height: 52px;
            }

            .percentage-icon {
                width: 24px;
                height: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="background-rectangle"></div>
    
    <div class="header">
        <div class="page-title">Inbox</div>
    </div>

    <div class="card-container">
        <div class="card-wrapper" id="cardWrapper">
            <div class="main-card">
                <div class="icon-container">
                    <div class="icon-square">
                        <div class="sticker-container">
                            <img src="" alt="üöÄ" class="sticker" id="rocketSticker">
                        </div>
                    </div>
                </div>
                <div class="text-content">
                    <div class="title">User</div>
                    <div class="description">You have 0 current tasks</div>
                </div>
            </div>
            <div class="percentage-box">
                <div class="percentage-icon"></div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg;
        try {
            tg = window.Telegram.WebApp;
            // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
            tg.expand();
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
            tg.enableClosingConfirmation();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = tg.initDataUnsafe?.user;
            const userName = user?.first_name || 'User';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞—à–∫–∏
            document.querySelector('.title').textContent = userName;
            document.querySelector('.description').textContent = 'You have 0 current tasks';
            
        } catch (error) {
            console.log('Telegram Web App not available, running in standalone mode');
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è standalone —Ä–µ–∂–∏–º–∞
            tg = {
                HapticFeedback: {
                    impactOccurred: () => {}
                }
            };
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∏–∫–µ—Ä–∞
        async function loadRocketSticker() {
            const rocketSticker = document.getElementById('rocketSticker');
            
            try {
                // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∏–∫–µ—Ä–µ —á–µ—Ä–µ–∑ Bot API
                // –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω bot token –∏ file_id —Å—Ç–∏–∫–µ—Ä–∞
                // –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω—ã–π —Å—Ç–∏–∫–µ—Ä
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Bot API, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥:
                // const response = await fetch(`https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getFile?file_id=<STICKER_FILE_ID>`);
                // const fileData = await response.json();
                // const filePath = fileData.result.file_path;
                // const stickerUrl = `https://api.telegram.org/file/bot<YOUR_BOT_TOKEN>/${filePath}`;
                
                // –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∏–∫–µ—Ä —Ä–∞–∫–µ—Ç—ã
                // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞
                const fallbackStickerUrl = 'https://raw.githubusercontent.com/TelegramStickers/rocket/master/sticker.webp';
                
                rocketSticker.src = fallbackStickerUrl;
                rocketSticker.onerror = function() {
                    // –ï—Å–ª–∏ —Å—Ç–∏–∫–µ—Ä –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–º–æ–¥–∑–∏ –∫–∞–∫ fallback
                    this.style.display = 'none';
                    this.parentElement.innerHTML = 'üöÄ';
                };
                
            } catch (error) {
                console.log('Error loading sticker:', error);
                rocketSticker.style.display = 'none';
                rocketSticker.parentElement.innerHTML = 'üöÄ';
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∏–∫–µ—Ä –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        loadRocketSticker();

        const cardWrapper = document.getElementById('cardWrapper');
        let isPressed = false;
        let currentX = 0;
        let currentY = 0;
        let targetX = 0;
        let targetY = 0;
        let returnTimeout = null;
        let animationFrame = null;

        // –§—É–Ω–∫—Ü–∏—è –≤–∏–±—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram
        function vibrate() {
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ–≤–æ—Ä–æ—Ç–∞
        function animateRotation() {
            const diffX = targetX - currentX;
            const diffY = targetY - currentY;
            
            currentX += diffX * 0.3;
            currentY += diffY * 0.3;
            
            if (Math.abs(diffX) < 0.001 && Math.abs(diffY) < 0.001) {
                currentX = targetX;
                currentY = targetY;
                cancelAnimationFrame(animationFrame);
                animationFrame = null;
            } else {
                animationFrame = requestAnimationFrame(animateRotation);
            }
            
            updateCardTransform();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—á–∞–ª–∞ –Ω–∞–∂–∞—Ç–∏—è
        document.addEventListener('touchstart', (e) => {
            isPressed = true;
            cardWrapper.classList.add('pressed');
            vibrate();
            
            if (returnTimeout) {
                clearTimeout(returnTimeout);
                returnTimeout = null;
            }
            if (animationFrame) {
                cancelAnimationFrame(animationFrame);
                animationFrame = null;
            }
            
            const touch = e.touches[0];
            targetX = (touch.clientX / window.innerWidth - 0.5) * 3;
            targetY = (touch.clientY / window.innerHeight - 0.5) * 2;
            
            animateRotation();
            e.preventDefault();
        }, { passive: false });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏—è
        document.addEventListener('touchmove', (e) => {
            if (!isPressed) return;
            
            const touch = e.touches[0];
            targetX = (touch.clientX / window.innerWidth - 0.5) * 3;
            targetY = (touch.clientY / window.innerHeight - 0.5) * 2;
            
            e.preventDefault();
        }, { passive: false });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è
        document.addEventListener('touchend', (e) => {
            if (!isPressed) return;
            
            isPressed = false;
            cardWrapper.classList.remove('pressed');
            
            returnTimeout = setTimeout(() => {
                returnToStart();
            }, 700);
        });

        function returnToStart() {
            targetX = 0;
            targetY = 0;
            animateRotation();
        }

        function updateCardTransform() {
            const rotateY = currentX * 25;
            const rotateX = -currentY * 15;
            const translateZ = isPressed ? 30 : 0;
            
            cardWrapper.style.transform = `
                rotateY(${rotateY}deg)
                rotateX(${rotateX}deg)
                translateZ(${translateZ}px)
            `;
        }

        // –ó–∞–ø—Ä–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
            return false;
        });

        // –ó–∞–ø—Ä–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });

        // –ó–∞–ø—Ä–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
        document.addEventListener('wheel', function(e) {
            if (e.ctrlKey) {
                e.preventDefault();
            }
        }, { passive: false });

        // –ó–∞–ø—Ä–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
